function closeMdCustomMenu(){const e=document.getElementById("md-custom-menu"),t=e.querySelector("div.dropdown-menu");t&&(t.style.transform=`translate3d(0, ${t.clientHeight}px, 0)`,e.classList.add("md-cmenu-transparent"),setTimeout(()=>{for(e.classList.add("md-cmenu-hide");e.firstChild;)e.removeChild(e.firstChild);e.click()},150))}(()=>{const t=(e,t,n,o)=>new Promise((r,c)=>{const i="div",d="beforeend",s=document.createElement(i);s.id="confirm",s.tabIndex=-1,document.body.insertAdjacentElement(d,s);const a=document.createElement(i);a.id="confirm-contents",s.insertAdjacentElement(d,a);const m=document.createElement(i);m.id="confirm-title",m.textContent=e,a.insertAdjacentElement(d,m);const l=document.createElement(i);l.id="confirm-message",l.textContent=t,a.insertAdjacentElement(d,l);const u=document.createElement(i);u.id="confirm-footer",a.insertAdjacentElement(d,u);const f=document.createElement(i);f.id="confirm-cancel",f.tabIndex=0,f.textContent=o||"Cancel",u.insertAdjacentElement(d,f);const p=document.createElement(i);p.id="confirm-ok",p.tabIndex=0,p.textContent=n||"OK",u.insertAdjacentElement(d,p);const b=document.createElement("style");b.id="confirm-style",b.insertAdjacentHTML(d,"body,html{overflow:hidden!important}#confirm,#confirm *{-webkit-tap-highlight-color:transparent;user-select:none;box-sizing:border-box;margin:0;padding:0;outline:0;color:inherit}#confirm{position:fixed;z-index:10000;top:0;right:0;bottom:0;left:0;inset:0;display:flex;font-size:16px;text-align:left;background-color:var(--confirm-overlay,rgb(0 0 0/.5));color:var(--confirm-c,rgb(0 0 0/.87))}#confirm-contents{width:80%;max-width:768px;margin:auto;border-radius:2px;background-color:var(--confirm-bg,#fafafa);box-shadow:var(--confirm-boxshadow,0 24px 38px 3px rgb(0 0 0/.14),0 9px 46px 8px rgb(0 0 0/.12),0 11px 15px -7px rgb(0 0 0/.2))}#confirm-contents>*{margin:15px}#confirm-contents>:empty{display:none}#confirm-footer{margin:4px 6px;text-align:right}#confirm-cancel,#confirm-ok{display:inline-block;vertical-align:middle;height:36px;margin:6px 0;padding:0 16px;border-radius:2px;font-size:14px;line-height:36px;background-color:var(--confirm-btn-bg,rgb(0 0 0/0));color:var(--confirm-btn-c,#343434);cursor:pointer;transition:background-color .2s}#confirm-cancel:focus,#confirm-ok:focus{background-color:var(--confirm-btn-bg-focus,rgb(0 0 0/.1));color:var(--confirm-btn-c-focus,#343434)}html.dark #confirm{background-color:var(--confirm-dark-overlay,rgb(0 0 0/.8));color:var(--confirm-dark-c,#fafafa)}html.dark #confirm-contents{background-color:var(--confirm-dark-bg,#212121);box-shadow:var(--confirm-dark-boxshadow,0 24px 38px 3px rgb(0 0 0/.14),0 9px 46px 8px rgb(0 0 0/.12),0 11px 15px -7px rgb(0 0 0/.2))}html.dark #confirm-cancel,html.dark #confirm-ok{background-color:var(--confirm-dark-btn-bg,rgb(0 0 0/0));color:var(--confirm-dark-btn-c,#fff)}html.dark #confirm-cancel:focus,html.dark #confirm-ok:focus{background-color:var(--confirm-dark-btn-bg-focus,rgb(255 255 255/.1));color:var(--confirm-dark-btn-c-focus,#fff)}"),s.insertAdjacentElement(d,b),s.focus();const g=()=>{s.remove()};s.addEventListener("click",e=>{e.target!==s||g()}),f.addEventListener("click",()=>{if(g(),c)return c()}),p.addEventListener("click",()=>{if(g(),r)return r()})}),n={embed:'<svg viewBox="0 0 24 24"><g><path d="M23.804 11.5l-6.496-7.25c-.278-.31-.752-.334-1.06-.06-.308.277-.334.752-.058 1.06L22.238 12l-6.047 6.75c-.275.308-.25.782.06 1.06.142.127.32.19.5.19.204 0 .41-.084.558-.25l6.496-7.25c.252-.28.258-.713 0-1zm-23.606 0l6.496-7.25c.278-.31.752-.334 1.06-.06.308.277.334.752.058 1.06L1.764 12l6.047 6.75c.277.308.25.782-.057 1.06-.143.127-.322.19-.5.19-.206 0-.41-.084-.56-.25L.197 12.5c-.252-.28-.257-.713 0-1zm9.872 12c-.045 0-.09-.004-.135-.012-.407-.073-.68-.463-.605-.87l3.863-21.5c.074-.407.466-.674.87-.606.408.073.68.463.606.87l-3.864 21.5c-.065.363-.38.618-.737.618z"></path></g></svg>'},o={"reference-to":"copylink","message-to":"message",email:"message",mention:"mention",followOrUnfollow:"follow",favoriteOrUnfavorite:"favorite",message:"message",lists:"addList",customtimelines:"addCollection","search-for-quoted":"search",destroy:"remove","flag-media":"report",mute:"mute",muteConversation:"mute",block:"block","report-tweet":"report","report-spam":"report"};if(!document.getElementById("md-style-menu")){const e=document.createElement("style");e.id="md-style-menu",e.type="text/css",e.innerHTML='html,body{overflow:hidden!important}#md-custom-menu .caret{display:none}#md-custom-menu{display:block;position:fixed;top:0;left:0;z-index:999;width:100vw;height:100vh;background-color:#00000060;will-change:background-color;transition-property:background-color;transition-duration:.15s;user-select:none;overscroll-behavior:none}#md-custom-menu.md-cmenu-transparent{background-color:#0000}#md-custom-menu.md-cmenu-hide{height:0}.dropdown-menu.md-cmenu-hide{display:none!important}#md-custom-menu>.dropdown-menu{display:block!important;position:absolute!important;top:unset!important;bottom:0!important;left:0!important;right:unset!important;margin:0!important;width:100%;border-radius:15px 15px 0 0!important;box-shadow:0 0 7px 0 rgb(0 0 0 / 13%)!important;font-size:14px!important;will-change:transform;transition:.15s cubic-bezier(.4,0,.2,1)}#md-custom-menu .md-drag{transition:0s!important}#md-custom-menu>.dropdown-menu>.md-menu-handle{display:block;width:30px;height:4px;border-radius:2px;margin:0 calc((100vw - 30px)/ 2) 5px;background-color:currentcolor}#md-custom-menu>.dropdown-menu li.is-selectable{position:relative;height:35px}#md-custom-menu>.dropdown-menu li>.md-cmenu-icon,#md-custom-menu>.dropdown-menu li>svg{display:inline-block;position:absolute;top:0;left:20px;width:auto;height:21px;line-height:21px;padding:7px 0;box-sizing:content-box!important;color:currentcolor;fill:currentcolor}#md-custom-menu>.dropdown-menu li>a{display:inline-block;width:100%;height:100%;line-height:35px;padding:0 25px 0 50px}#md-custom-menu .md-cmenu-dummy{position:absolute;top:0;left:0;width:100%;height:100%}#md-custom-menu .md-cmenu-dummy:hover{background-color:#00000015}#md-custom-menu>.dropdown-menu li.is-selectable>a:after{font-size:14px!important}#md-custom-menu .icon:before{font-weight:400}.md-icon-mention:before{content:"\\F064"}.md-icon-copylink:before{content:"\\F098"}.md-icon-message:before{content:"\\F054"}.md-icon-follow:before{content:"\\F175"}.md-icon-favorite:before{content:"\\F148"}.md-icon-addList:before{content:"\\F712"}.md-icon-addCollection{transform:scale(-1,1)}.md-icon-addCollection:before{content:"\\F214"}.md-icon-search:before{content:"\\F058"}.md-icon-mute:before{content:"\\F101"}.md-icon-block:before{content:"\\E609"}.md-icon-report:before{content:"\\F038"}.md-icon-remove:before{content:"\\F154"}',document.head.appendChild(e)}if(!document.getElementById("md-custom-menu")){const e=document.createElement("div");e.id="md-custom-menu",e.classList.add("md-cmenu-hide","md-cmenu-transparent"),e.addEventListener("touchstart",function(e){c=e.target,i=c.closest("div.dropdown-menu"),d=c.closest("a[data-action]");const t=e.touches;a||(a={x:t[0].pageX,y:t[0].pageY});m||(m=a);f=0}),e.addEventListener("touchmove",function(e){if(!i)return;const t=e.touches;if(m={x:t[0].pageX,y:t[0].pageY},!p)return i.classList.add("md-drag"),(f=m.y-a.y-5)<0&&(f=0),b=f>130,void(i.style.transform=`translate3d(0, ${f}px, 0)`);p&&20<function(e,t){const n=Math.abs(t.x-e.x),o=Math.abs(t.y-e.y);return n*n+o*o}(a,m)&&(p=!1)}),e.addEventListener("touchend",function(e){if(c=null,a=null,m=null,p=!0,!i)return void closeMdCustomMenu();i.classList.remove("md-drag"),b?(i.style.transform=`translate3d(0, ${i.innerHeight}px, 0)`,closeMdCustomMenu()):i.style.transform="translate3d(0, 0, 0)";b=!1}),document.body.appendChild(e)}function r(e){const t=document.body.querySelector("div:not(#md-custom-menu) .dropdown-menu");if(!t||!e)return;const n=t.querySelector(`a[data-action="${e}"]`),o=n?n.closest("li.is-selectable"):null;o&&(o.classList.add("is-selected"),n.click())}let c,i,d,a,m,l=null;function u(e){e.classList.add("md-cmenu-hide");const c=document.getElementById("md-custom-menu");!l&&c.classList.contains("md-cmenu-hide")&&(l=setTimeout(()=>{x.disconnect();const i=e.cloneNode(!0);if(c){c.classList.remove("md-cmenu-hide","md-cmenu-transparent"),i.insertAdjacentHTML("afterbegin",'<div class="md-menu-handle"></div>');const e=i.querySelectorAll("li.is-selectable > a[data-action]");for(s of e){const e=s.dataset.action;if(e){if(o[e]){const t=`<div class="md-cmenu-icon"><i class="icon md-icon-${o[e]}"></i></div>`;s.insertAdjacentHTML("beforebegin",t)}else n[e]&&s.insertAdjacentHTML("beforebegin",n[e]);const c=document.createElement("div");c.classList.add("md-cmenu-dummy"),c.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation(),"destroy"==e?t("削除","このツイートを削除しますか?","はい","いいえ").then(()=>{r("destroy")}).catch(()=>{}):r(e)},{passive:!1}),s.parentNode.insertBefore(c,s.nextSibling)}}i.style.transform=`translate3d(0, ${window.innerHeight}px, 0)`,c.appendChild(i),i.style.transform=`translate3d(0, ${i.clientHeight}px, 0)`,i.style.transform="translate3d(0, 0, 0)"}x.observe(g,h),l&&clearTimeout(l),l=null},10))}let f=0,p=!0,b=!1;const g=document.body,h={childList:!0,subtree:!0},x=new MutationObserver(t=>{for(e of t){const t=e.addedNodes?e.addedNodes[0]:null;if(t&&t.classList&&t.classList.contains("dropdown-menu")){if(!t.closest('a[data-action="message-menu"], div.js-column-options')){if(t.querySelector('a[data-action="globalSettings"]'))return;u(t)}}else{const t=e.removedNodes?e.removedNodes[0]:null;t&&t.classList&&t.classList.contains("dropdown-menu")&&closeMdCustomMenu()}}});g&&x.observe(g,h)})();
